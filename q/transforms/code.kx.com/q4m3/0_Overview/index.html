



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Q for Mortals">
      
      
        <link rel="canonical" href="index.html">
      
      
        <meta name="author" content="Jeffry Borror">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../img/favicon.ico">
      <meta name="generator" content="mkdocs-0.17.3, mkdocs-material-2.7.2">
    
    
      
        <title>0. Overview - Q for Mortals</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.8d40d89b.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.6079476c.css">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
      <link rel="stylesheet" href="http://code.kx.com/stylesheets/prism.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="deep-orange">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="index.html#0-overview" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://code.kx.com/q4m3" title="Q for Mortals" class="md-header-nav__button md-logo">
          
            <img src="../img/qfm3.jpg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Q for Mortals
              </span>
              <span class="md-header-nav__topic">
                0. Overview
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../img/qfm3.jpg" width="48" height="48">
      
    </span>
    Q for Mortals
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../redirect/index.html" title="code.kx.com" class="md-nav__link">
      code.kx.com
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../index.html" title="Contents" class="md-nav__link">
      Contents
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../preface/index.html" title="Preface" class="md-nav__link">
      Preface
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        0. Overview
      </label>
    
    <a href="index.html" title="0. Overview" class="md-nav__link md-nav__link--active">
      0. Overview
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="index.html#00-the-evolution-of-q" title="0.0 The Evolution of Q" class="md-nav__link">
    0.0 The Evolution of Q
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="index.html#01-philosophy" title="0.1 Philosophy" class="md-nav__link">
    0.1 Philosophy
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="index.html#02-mathematics-refresher" title="0.2 Mathematics Refresher" class="md-nav__link">
    0.2 Mathematics Refresher
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="index.html#021-variables" title="0.2.1 Variables" class="md-nav__link">
    0.2.1 Variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="index.html#022-functions" title="0.2.2 Functions" class="md-nav__link">
    0.2.2 Functions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="index.html#023-natural-numbers" title="0.2.3 Natural Numbers" class="md-nav__link">
    0.2.3 Natural Numbers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="index.html#024-mathematical-induction-and-recursion" title="0.2.4 Mathematical Induction and Recursion" class="md-nav__link">
    0.2.4 Mathematical Induction and Recursion
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="index.html#025-addition" title="0.2.5 Addition" class="md-nav__link">
    0.2.5 Addition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="index.html#026-recursion-restated" title="0.2.6 Recursion Restated" class="md-nav__link">
    0.2.6 Recursion Restated
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="index.html#027-multiplication" title="0.2.7 Multiplication" class="md-nav__link">
    0.2.7 Multiplication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="index.html#028-exponentiation" title="0.2.8 Exponentiation" class="md-nav__link">
    0.2.8 Exponentiation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="index.html#029-lists" title="0.2.9 Lists" class="md-nav__link">
    0.2.9 Lists
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="index.html#0210-rationals-and-reals" title="0.2.10 Rationals and Reals" class="md-nav__link">
    0.2.10 Rationals and Reals
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../1_Q_Shock_and_Awe.1" title="1. Q Shock and Awe" class="md-nav__link">
      1. Q Shock and Awe
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../2_Basic_Data_Types_Atoms/index.html" title="2. Basic Data Types – Atoms" class="md-nav__link">
      2. Basic Data Types – Atoms
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../3_Lists.1" title="3. Lists" class="md-nav__link">
      3. Lists
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../4_Operators.1" title="4. Operators" class="md-nav__link">
      4. Operators
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../5_Dictionaries.1" title="5. Dictionaries" class="md-nav__link">
      5. Dictionaries
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../6_Functions.1" title="6. Functions" class="md-nav__link">
      6. Functions
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../7_Transforming_Data/index.html" title="7. Transforming Data" class="md-nav__link">
      7. Transforming Data
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../8_Tables.1" title="8. Tables" class="md-nav__link">
      8. Tables
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../9_Queries_q-sql.1" title="9. Queries – q-sql" class="md-nav__link">
      9. Queries – q-sql
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../10_Execution_Control/index.html" title="10. Execution Control" class="md-nav__link">
      10. Execution Control
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../11_IO.1" title="11. I/O" class="md-nav__link">
      11. I/O
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../12_Workspace_Organization.1" title="12. Workspace Organization" class="md-nav__link">
      12. Workspace Organization
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../13_Commands_and_System_Variables.1" title="13. Commands and System Variables" class="md-nav__link">
      13. Commands and System Variables
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../14_Introduction_to_Kdb+.1" title="14. Introduction to Kdb+" class="md-nav__link">
      14. Introduction to Kdb+
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../A_Built-in_Functions.1" title="Appendix A. Built-in Functions" class="md-nav__link">
      Appendix A. Built-in Functions
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../B_Error_Messages/index.html" title="Appendix B. Error Messages" class="md-nav__link">
      Appendix B. Error Messages
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../colophon/index.html" title="Colophon" class="md-nav__link">
      Colophon
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="index.html#00-the-evolution-of-q" title="0.0 The Evolution of Q" class="md-nav__link">
    0.0 The Evolution of Q
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="index.html#01-philosophy" title="0.1 Philosophy" class="md-nav__link">
    0.1 Philosophy
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="index.html#02-mathematics-refresher" title="0.2 Mathematics Refresher" class="md-nav__link">
    0.2 Mathematics Refresher
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="index.html#021-variables" title="0.2.1 Variables" class="md-nav__link">
    0.2.1 Variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="index.html#022-functions" title="0.2.2 Functions" class="md-nav__link">
    0.2.2 Functions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="index.html#023-natural-numbers" title="0.2.3 Natural Numbers" class="md-nav__link">
    0.2.3 Natural Numbers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="index.html#024-mathematical-induction-and-recursion" title="0.2.4 Mathematical Induction and Recursion" class="md-nav__link">
    0.2.4 Mathematical Induction and Recursion
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="index.html#025-addition" title="0.2.5 Addition" class="md-nav__link">
    0.2.5 Addition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="index.html#026-recursion-restated" title="0.2.6 Recursion Restated" class="md-nav__link">
    0.2.6 Recursion Restated
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="index.html#027-multiplication" title="0.2.7 Multiplication" class="md-nav__link">
    0.2.7 Multiplication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="index.html#028-exponentiation" title="0.2.8 Exponentiation" class="md-nav__link">
    0.2.8 Exponentiation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="index.html#029-lists" title="0.2.9 Lists" class="md-nav__link">
    0.2.9 Lists
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="index.html#0210-rationals-and-reals" title="0.2.10 Rationals and Reals" class="md-nav__link">
    0.2.10 Rationals and Reals
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="0-overview">0. Overview<a class="headerlink" href="index.html#0-overview" title="Permanent link">&para;</a></h1>
<h2 id="00-the-evolution-of-q">0.0 The Evolution of Q<a class="headerlink" href="index.html#00-the-evolution-of-q" title="Permanent link">&para;</a></h2>
<p>Arthur Whitney developed the q programming language and its database kdb+. Released by Kx Systems, Inc. in 2003, the primary design objectives of q are expressiveness, speed and efficiency. In these, it is beyond compare. The design trade-off is a terseness that can be disconcerting to programmers coming from verbose traditional database programming environments – e.g., C++, Java, C# or Python – and a relational DBMS. Whereas the q programming gods revel in programs resembling an ASCII core dump, this manual is for the rest of us.</p>
<p>Q evolved from <a href="https://en.wikipedia.org/wiki/APL_(programming_language)">APL</a> (A Programming Language), which was first invented as a mathematical notation by <a href="https://en.wikipedia.org/wiki/Kenneth_E._Iverson">Kenneth Iverson</a> at Harvard University in the 1950s. APL was introduced in the 1960s by IBM as a vector programming language, meaning that it processes a list of numbers in a single operation. It was successful in finance and other industries that required heavy number crunching.</p>
<p>The mitochondrial DNA of q traces from APL to A to <a href="http://www.aplusdev.org/">A+</a> and to k. All were well suited to performing complex calculations quickly on vectors. What's new in q/kdb+ is that it processes large volumes of time-series data very efficiently in the relational paradigm. Its syntax allows "select" expressions that are similar to SQL 92, and its collection of built-in functions provides a complete and powerful stored procedure language.</p>
<p>There is also some <a href="https://en.wikipedia.org/wiki/Lisp_(programming_language)">Lisp</a> in q's genes: the fundamental data construct of q is a list. Although the notation and terminology are different, symbols are drawn from their counterparts in Scheme.</p>
<p>The APL lineage of q also shows the influence of functional programming. In his 1977 Turing Award lecture that introduced purely functional programming, <a href="https://en.wikipedia.org/wiki/John_Backus">Backus</a> acknowledged inspiration from APL. While q is not purely functional, it is strongly functional in that even its basic data structures, list and dictionary, are viewed as mathematical mappings.</p>
<h2 id="01-philosophy">0.1 Philosophy<a class="headerlink" href="index.html#01-philosophy" title="Permanent link">&para;</a></h2>
<p>A proficient q developer thinks differently than in conventional programming environments such as C++, Java, C# or Python, henceforth referred to as "traditional programming." In order to get you into the correct mindset, we summarize some of the potential discontinuities for the q newbie – henceforth known as qbie.</p>
<p>Recall some of the data-related issues in traditional database programming:</p>
<ul>
<li>In-memory representation – e.g., collections of objects – must be mapped to a different representation – i.e., tables – for persistence. It takes considerable effort to get the object-relational correspondence correct.</li>
<li>Objects must be mapped to another representation for transport, usually some binary or XML form that flattens reference chains.</li>
<li>Data manipulation – e.g., selection, grouping and aggregation – on large data sets is best done in stored procedures on the database server. Demanding numeric calculations are best done apart from the database on an application server.</li>
<li>Data transformation for GUI display is best done in a separate layer – e.g., to HTML5 and JavaScript in a browser.</li>
</ul>
<p>Much of traditional programming design is spent getting the various representations correct, requiring many lines of code to marshal resources and synchronize the different representations. These are remarkably simple in q/kdb+.</p>
<p><strong>Interpreted</strong> Q is interpreted, not compiled. During execution, data and functions live in an in-memory workspace. Iterations of the development cycle tend to be quick because all run-time information needed to test and debug is immediately available in the workspace. Q programs are stored and executed as simple text files called scripts. The interpreter's <code>eval</code> and <code>parse</code> routines are exposed so that you can dynamically generate code in a controlled manner.</p>
<p><strong>Types</strong> Q is a dynamically typed language, in which type checking is mostly unobtrusive. Each variable has the type of its currently assigned value and type promotion is automatic for most numeric operations. Types are checked on operations to homogenous lists.</p>
<p><strong>Evaluation Order</strong> While q is entered left-to-right, expressions are evaluated right-to-left or, as the q gods prefer, left of right – meaning that a function is applied to the argument on its right. There is no operator precedence and function application can be written without brackets. Punctuation noise is significantly reduced.</p>
<p><strong>Null and Infinity Values</strong> In classical SQL, the value <code>NULL</code> represents missing data for a field of any type and takes no storage space. In q, null values are typed and take the same space as non-nulls. Numeric types also have infinity values. Infinite and null values can participate in arithmetic and other operations with (mostly) predictable results.</p>
<p><strong>Integrated I/O</strong> I/O is done through function handles that act as windows to the outside world. Once such a handle is initialized, passing a value to the handle is a write.</p>
<p><strong>Table Oriented</strong> Give up objects, ye who enter here. In contrast to traditional languages, you'll find no classes, objects, inheritance and virtual methods in q. Instead, q has tables as first class entities. The lack of objects is not as severe as might first appear. Objects are essentially glorified records (i.e., entities with named fields), which are modeled by q dictionaries. A table can be viewed as a list of record dictionaries.</p>
<p><strong>Ordered Lists</strong> Because classical SQL is the algebra of sets – which are unordered with no duplicates – row order and column order are not defined, making time series processing cumbersome and slow. In q, data structures are based on ordered lists, so time series maintain the order in which they are created. Moreover, simple lists occupy contiguous storage, so processing big data is fast. Very fast.</p>
<p><strong>Column Oriented</strong> SQL tables are organized as rows distributed across storage and operations apply to fields within a row. Q tables are column lists in contiguous storage and operations apply on entire columns.</p>
<p><strong>In-Memory Database</strong> One can think of kdb+ as an in-memory database with persistent backing. Since data manipulation is performed with q, there is no separate stored procedure language. In fact, kdb+ comprises serialized q column lists written to the file system and then mapped into memory.</p>
<h2 id="02-mathematics-refresher">0.2 Mathematics Refresher<a class="headerlink" href="index.html#02-mathematics-refresher" title="Permanent link">&para;</a></h2>
<p>In order to understand q, it is important to have a clear grasp of the basic concepts and terminology of mathematical functions. In fact, the basic constructs of q can all be interpreted as function mappings. The following refresher is intended to help those who are rusty with mathematics.</p>
<h3 id="021-variables">0.2.1 Variables<a class="headerlink" href="index.html#021-variables" title="Permanent link">&para;</a></h3>
<p>In mathematics, a variable represents an unknown whose potential values can be drawn from a specified domain. The power of the concept is that a property or formula that can be demonstrated to hold for a variable is then known to hold for every particular value of its domain.</p>
<p>A variable has a symbolic representation – i.e., a name. The names of variables occur in syntactically well-formed expressions. In such a context, a variable is given meaning by substitution – i.e., all occurrences of the variable are replaced by a specific value. Once substitution is performed, the variable no longer is an unknown; it has the substituted value from that point onward. In the colloquial, a variable is substituted once in its lifetime.</p>
<p>Imperative programming languages, including q, abuse the concept of a variable. They use the term "variable" to mean a name associated with storage that can hold a value of a specific domain. This should be called an "assignable". The act of associating a name and a value, called <em>assignment</em>, is achieved by placing the value into the storage referenced by the name. Assignment is <strong>not</strong> substitution: the assignment can subsequently be changed and the variable will then have <strong>that</strong> value. Shared assignable variables are the source of great evil in concurrent and distributed computing.</p>
<h3 id="022-functions">0.2.2 Functions<a class="headerlink" href="index.html#022-functions" title="Permanent link">&para;</a></h3>
<p>In mathematics, a function associates a unique output value to each input value. The collection of all input values is the <em>domain</em> of the function and the collection from which the output values are chosen is the <em>codomain</em> (or <em>range</em>). A function is also called a <em>map</em> (or <em>mapping</em>) from its domain to its codomain.</p>
<p>The output value that a function f associates to an input value x is read "f of x" or "f at x" or "f on x" More verbosely, we apply (or evaluate) f at an argument to obtain the corresponding result. In mathematics and many programming languages, the output value of a function is represented with the function name to the left of its argument(s), which are enclosed in matched parentheses or brackets. Some functions can take multiple inputs, which are separated by commas or semicolons.</p>
<p>There are two basic ways to define a function: an algorithm or a graph. An algorithm is a sequence of operations on the input value(s) to arrive at the corresponding output value. For example, we define the squaring function, over the domain and codomain of real numbers, to assign as output value the input value times itself. Alternatively, you can define a function by explicitly listing its input-output associations. The collection of associated input-output pairs is the graph of the function.</p>
<p>As you will no doubt recall from many bucolic hours in high-school math class, a function defined by algorithm can be converted to a graph by feeding in input values, cranking out the associated outputs, and collecting the pairs into a table. In general, there is no explicit formula to calculate the values for an arbitrary input-output graph. If it is possible to define a function via a formula, this is usually the preferred way to specify it since it is compact, but there is no guarantee that the formula will be easy or quick to compute.</p>
<p>Here are the two forms for the squaring function over the domain of natural numbers 0 through 3, as you might recall them from school.</p>
<p><em>f(x) = x<sup>2</sup></em> </p>
<pre><code>I   O
------
0   0
1   1
2   4
3   9
</code></pre>

<p>When graphing a function, we normally think of the I/O table as a list of <em>(x,y)</em> pairs in the Cartesian plane.</p>
<pre><code>0, 0
1, 1
2, 4
</code></pre>

<p>Alternately, we can view this as a pair of columns having positional correspondence.</p>
<pre><code>0 |-&gt; 0
1 |–&gt; 1
2 |–&gt; 4
</code></pre>

<p>This perspective will prove useful.</p>
<p>The number of inputs to a function is called its <em>valence</em>. Lower valences have their own terminology. A function of valence 1 (i.e., defined by a formula that has one parameter) is said to be <em>monadic</em>. For example, <code>neg(x)</code> takes a number and returns the result of reversing the sign. A function of valence 2 (i.e., two parameters) is said to be <em>dyadic</em>. For example, <code>sum(x, y)</code> takes two numbers and adds them to get the result. A function with no parameters is <em>niladic</em>. For example, a constant function with no parameters that returns 42.</p>
<p>Given functions <em>f</em> and <em>g</em> for which the codomain of <em>g</em> is the domain of <em>f</em>, the <em>composite</em>, denoted <em>f·g</em>, is the function obtained by chaining the output of <em>g</em> into <em>f</em>. That is, the composite assigns to an input <em>x</em> the output value <em>f(g(x))</em>. Observe the usual mathematical convention in which the order of the functions in the composite matches their order in the nested evaluation.</p>
<p>Pictorially, we can see that the composite chains the output of <em>g</em> into the input of <em>f</em>,</p>
<pre><code>  g        f
x |–&gt; g(x) |–&gt; f(g(x))
</code></pre>

<p>The domain of the composite is the domain of <em>g</em> and its codomain is the codomain of <em>f</em>.</p>
<div class="admonition convention">
<p class="admonition-title">Convention</p>
<p>In the body of this document, we shall use the term <em>map</em>, or <em>mapping</em>, as shorthand for "mathematical function" and will mean a q function when we write "function" without a modifier.</p>
</div>
<h3 id="023-natural-numbers">0.2.3 Natural Numbers<a class="headerlink" href="index.html#023-natural-numbers" title="Permanent link">&para;</a></h3>
<p>The natural numbers are the basis of computing. It is instructive to derive the natural numbers from the primitive notion of counting.</p>
<ul>
<li>Start with no items.</li>
<li>For any number of counted items, we can count one more, called the <em>successor</em> of that number</li>
</ul>
<p>We all did this on our fingers as children.</p>
<p>Mathematicians prefer symbols.</p>
<ul>
<li>Start with no items, written 0.</li>
<li>For any number of counted items <em>n</em> we can count one more, called the <em>successor</em> of the number and written <em>s(n)</em></li>
</ul>
<p>Thus the natural numbers are built by iteration of counting "one more."</p>
<pre><code>0 s(n) s(s(n)) s(s(s(n))) …
</code></pre>

<p>Writing all those successors can be cumbersome so we give them symbolic names.</p>
<p>0 1 2 3 …</p>
<p>How do we guarantee that these are the <strong>only</strong> things in our collection? Without such assurance, a forger could add spurious items such as infinity or -1 and pass off the forged collection as the natural numbers.</p>
<h3 id="024-mathematical-induction-and-recursion">0.2.4 Mathematical Induction and Recursion<a class="headerlink" href="index.html#024-mathematical-induction-and-recursion" title="Permanent link">&para;</a></h3>
<p>The <em>principle of mathematical induction</em> says that the natural numbers comprise the minimal collection satisfying the following rules.</p>
<ul>
<li>The collection contains 0</li>
<li>Whenever <em>n</em> is in the collection so is <em>s(n)</em></li>
</ul>
<p>For those who care, the formal expression of minimality is that given <strong>any</strong> collection satisfying these two properties, there is a unique map from our collection to that collection. The minimality requirement provides the guarantee that any collection satisfying these rules is essentially the same as our naturals – no more, no less.</p>
<p>Perhaps you are more familiar with the following equivalent way of stating the principle of mathematical induction: to prove that a property holds for all natural numbers, show that the collection of numbers for which it holds satisfies the above two rules.</p>
<p>Let's take stock. As defined above, a natural number has one of two forms:</p>
<ul>
<li>It is 0</li>
<li>Or it is s(n) where n is a natural number previously defined.</li>
</ul>
<p>Thus to define anything on all natural numbers, we must:</p>
<ul>
<li>Define it on 0</li>
<li>For any natural number n on which it is defined, define it on s(n)</li>
</ul>
<p>This is <em>inductive</em> definition. To define a function <em>f</em> on the natural numbers, we follow this prescription.</p>
<ul>
<li>Define the result of <em>f</em> at 0</li>
<li>Assuming <em>f</em> is defined on a natural number n, define it on s(n)</li>
</ul>
<p>An example of such a function is right in front of us: the successor s.</p>
<ul>
<li>s on 0 is s(0)</li>
<li>s on n is s(n)</li>
</ul>
<p>Now we look at a special case of this general inductive style of function definition with an added requirement (in bold).</p>
<ul>
<li>Define the value of <em>f</em> at 0</li>
<li>Assuming <em>f</em> is defined on a natural number n, define it on s(n) <strong>in terms of its value on n</strong>.</li>
</ul>
<p>A function defined in this manner is <em>recursive</em>. At first glance it seems that recursive definition might seriously limit the functions that we can define, but that is not the case.</p>
<h3 id="025-addition">0.2.5 Addition<a class="headerlink" href="index.html#025-addition" title="Permanent link">&para;</a></h3>
<p>What is addition? The key insight is that adding is merely counting "one mores" – i.e., counting applications of the successor <em>s</em>. Expressed inductively,</p>
<ul>
<li>Adding 0 applies <em>s</em> no times – i.e., returns the original number</li>
<li>Provided we know how to add <em>n</em>, adding <em>s(n)</em> is one more application <em>of s</em></li>
</ul>
<p>Let's make addition so described into a recursive function. For an arbitrary natural number <em>m,</em> we define a recursive function <em>add_to_m</em> that counts applications of the successor to <em>m</em>.</p>
<ul>
<li><em>add_to_m</em> on 0 is <em>m</em> – i.e., apply <em>s</em> no times</li>
<li><em>add_to_m</em> on <em>s</em>(<em>n</em>) is <em>s</em>(<em>add_to_m</em>(<em>n</em>)) – i.e., apply <em>s</em> once more</li>
</ul>
<p>Once you experience the Zen, you will see that we can <strong>define</strong> the customary notation for addition using <em>add_to_m<strong>.</strong></em></p>
<pre><code>   def
m+n = add_to_m(n)
</code></pre>

<p>It is an instructive exercise to prove the usual properties of addition. For example, show commutativity – which is not immediately obvious.</p>
<pre><code>    ?
n+m = m+n
</code></pre>

<p>The proof uses mathematical induction (of course).</p>
<h3 id="026-recursion-restated">0.2.6 Recursion Restated<a class="headerlink" href="index.html#026-recursion-restated" title="Permanent link">&para;</a></h3>
<p>As a special case of addition, we observe that <em>n</em> + 1 is <em>s</em>(<em>n</em>). Now we can restate the notion of recursive function definition in the more familiar form.</p>
<ul>
<li>Define <em>f</em> for the base case 0</li>
<li>Express <em>f</em>(<em>n</em>+1) in terms of <em>f</em>(<em>n</em>)</li>
</ul>
<p>It is an interesting exercise left to the reader to prove that this is equivalent to the seemingly more powerful form:</p>
<ul>
<li>Define <em>f</em> for the base case 0</li>
<li>Express <em>f</em>(<em>n</em>+1) in terms of <em>f</em>(0), …, <em>f</em>(<em>n</em>)</li>
</ul>
<p>This is the form of recursive definition we shall assume in following chapters. We note that the second portion of this prescription – i.e., the inductive step – gives recursive functions their identifying characteristic. For a non-base input value, the function output involves applications of itself on "lesser" values. Consequently, evaluation involves unwrapping a nested series of such applications until the base case is reached.</p>
<h3 id="027-multiplication">0.2.7 Multiplication<a class="headerlink" href="index.html#027-multiplication" title="Permanent link">&para;</a></h3>
<p>Having defined addition recursively as counting how many times to apply the successor, we can do the same thing by counting how many times to apply addition. This is multiplication. In words,</p>
<ul>
<li>Multiplying by 0 performs no additions</li>
<li>Provided we know how to multiply by <em>n</em>, multiplying by <em>s(n)</em> is one more addition of <em>n</em></li>
</ul>
<p>We translate this into a recursive function <em>times_m</em>.</p>
<ul>
<li><em>times_m</em> on 0 is the identity for addition-i.e., 0</li>
<li><em>times_m</em> on <em>n</em>+1 is <em>n+times_m(n)</em></li>
</ul>
<p>Incidentally, the fact that multiplication counts how many times to add is why we call multiplication "times" in English and is how the "times" tables we all memorized in elementary school are derived. Again we <strong>define</strong> the customary notation for multiplication using <em>times_m</em>.</p>
<pre><code>    def
m*n = times_m(n)
</code></pre>

<h3 id="028-exponentiation">0.2.8 Exponentiation<a class="headerlink" href="index.html#028-exponentiation" title="Permanent link">&para;</a></h3>
<p>Having defined multiplication recursively as counting how many times to apply addition, we repeat the same technique to define exponentiation. Namely, exponentiation counts how many times to apply multiplication. In words,</p>
<ul>
<li>Raising to the power 0 multiplies no times</li>
<li>If we know how to raise to the power <em>n</em>, then raising to the power <em>s(n)</em> is one more multiplication</li>
</ul>
<p>We define the recursive function <em>m_power_of</em> as follows.</p>
<ul>
<li><em>m_power_of</em> on 0 is the identity for multiplication – i.e., 1</li>
<li><em>m_power_of</em> on <em>n</em>+1 is <em>m*m_power_of(n)</em></li>
</ul>
<p>Again we <strong>define</strong> the customary notation in terms of the recursive <em>m_power_of.</em></p>
<pre><code>   def
m^n = m_power_of(n)
</code></pre>

<p>In summary, we have defined basic arithmetic using only recursion, 0 and "one more." The economy of induction is impressive.</p>
<h3 id="029-lists">0.2.9 Lists<a class="headerlink" href="index.html#029-lists" title="Permanent link">&para;</a></h3>
<p>Lists can also be defined inductively, starting with the empty list and the notion of adding one item to the list.</p>
<ul>
<li>The empty list, written (), is the list with no items</li>
<li>Given a list L of items of some domain together with a value x of that domain, we obtain a new list by appending the value x to the end of the list, written L,x</li>
</ul>
<p>The list constructed by successively appending x<sub>1</sub>, x<sub>2</sub>, …, x<sub>n</sub> to the empty list is written</p>
<p>(x<sub>1</sub>; x<sub>2</sub>; …; x<sub>n</sub>)</p>
<p>Since lists are inductively defined, operations on lists can be defined recursively. For example, the <em>count</em> (i.e., length) of a list is defined as follows.</p>
<ul>
<li>The count of the empty list () is 0</li>
<li>Given a list L of count n and an atom x, the count of L,x is 1+count L, which is 1+n</li>
</ul>
<p>As an exercise you can extend the notion of appending a single value to appending one list to another and then prove – inductively of course – that for two lists L and M,</p>
<p>count(L,M) = count(L) + count(M)</p>
<h3 id="0210-rationals-and-reals">0.2.10 Rationals and Reals<a class="headerlink" href="index.html#0210-rationals-and-reals" title="Permanent link">&para;</a></h3>
<p>In everyday usage of mathematics, we implicitly identify things that aren't actually the same. Most common is identifying a natural number – e.g. 42 – as a rational number or as a real number. But a natural number isn't actually a real number; it just plays one on TV.</p>
<p>Indeed, we have seen that natural numbers are obtained by counting "one more" starting from 0. Ignoring signs for the moment, a rational number is an equivalence class of formal quotients <em>a</em>/<em>b</em> of naturals, In plain speak, <em>a</em>/<em>b</em> and <em>c</em>/<em>d</em> are considered the same just when <em>ad</em> = <em>bc</em>. So 2/1 and 4/2 and 6/3, etc. are all considered to be the same. The naturals have a faithful embedding into the rationals in which <em>n</em> is mapped to <em>n</em>/1. This allows us to identify <em>n</em> with (the class of rationals equivalent to) <em>n</em>/1, but they are clearly different mathematical entities.</p>
<p>Similarly, a real number is (in the formulation most of us use) an infinite decimal – i.e., an infinite sequence of natural numbers representing place values in powers of 10. Long division converts a rational to its repeating decimal expansion, so there is an embedding of rationals into the reals, but <em>a</em>/<em>b</em> is manifestly <strong>not</strong> an infinite decimal.</p>
<p>The identification of naturals and rationals as reals is normally done without thinking. In fact, some argue vehemently that a natural number <strong>is</strong> a real number. It is not but it can be identified with one.</p>
<p>Another interesting fact of programming life is that normal data types can only represent an insignificant set of real numbers. Typically reals are represented by single or double precision floating point values. Since these are limited to at most 16 decimal digits, they are clearly rationals, and a pretty limited set of rationals at that. Even "unlimited" decimal values are still rational, as any computer has finite storage. The way to represent a real properly is with a lazy sequence that presents digits "on demand."</p>
<p>The moral of the story is that we can normally go about our programming day without worrying about these distinctions. But there are situations where they matter.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../preface/index.html" title="Preface" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Preface
              </span>
            </div>
          </a>
        
        
          <a href="../1_Q_Shock_and_Awe.1" title="1. Q Shock and Awe" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                1. Q Shock and Awe
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            ©2015 Jeffry A. Borror / q4m LLC. Kx® and kdb+ are registered trademarks of Kx Systems, Inc., a subsidiary of First Derivatives plc.
          </div>
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.b438e6c5.js"></script>
      
      <script>app.initialize({version:"0.17.3",url:{base:".."}})</script>
      
        <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
      
        <script src="https://tracker.mrpfd.com/tracker.js"></script>
      
        <script src="http://code.kx.com/scripts/googleanalytics.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
        <script src="https://use.fontawesome.com/3dbf29ed12.js"></script>
      
        <script src="http://code.kx.com/scripts/prism.js"></script>
      
    
    
      
    
  </body>
</html>